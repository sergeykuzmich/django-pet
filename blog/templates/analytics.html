{% extends 'layout.html' %}
{% block title %}Analytics{% endblock %}
{% block content %}
    <div class="mx-auto flex gap-16">
        <div class="flex-1">
            <h1 class="mb-2 font-bold tracking-tight text-2xl">Top Authors</h1>
            <div class="py-4">
                <ul role="list" class="divide-y divide-gray-100">
                    {% for author in author_views %}
                        <li class="flex justify-between gap-x-6 py-5">
                            <div class="flex min-w-0 gap-x-4">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                     stroke-width="1.5"
                                     stroke="currentColor" class="size-12 rounded-full bg-gray-300 p-2">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path>
                                </svg>
                                <div class="min-w-0 flex-auto">
                                    <p class="text-sm font-semibold leading-6 text-gray-900">{% firstof author.get_full_name author.username %}</p>
                                    <p class="truncate text-xs leading-5 text-gray-500">{{ author.email }}</p>
                                </div>
                            </div>
                            <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
                                <p class="text-sm leading-6 text-gray-900">Total Posts: {{ author.total_posts }}</p>
                                <p class="mt-1 text-xs leading-5 text-gray-500">Total
                                    Views: {{ author.total_post_views }}</p>
                            </div>
                        </li>
                    {% endfor %}</ul>
            </div>
        </div>
        <div class="flex-1">
            <h1 class="mb-2 font-bold tracking-tight text-2xl">Top Posts</h1>
            <div class="py-4">
                <ul role="list" class="divide-y divide-gray-100">
                    {% for post in post_views %}
                        <li class="flex justify-between gap-x-6 py-5">
                            <div class="flex min-w-0 gap-x-4">
                                <div class="min-w-0 flex-auto">
                                    <a href="{% url 'post-detail' pk=post.id %}" class="text-sm font-semibold leading-6 hover:underline text-gray-900">{{ post.title }}</a>
                                </div>
                            </div>
                            <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
                                <p class="mt-1 text-xs leading-5 text-gray-500">Views: {{ post.views }}</p>
                            </div>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
